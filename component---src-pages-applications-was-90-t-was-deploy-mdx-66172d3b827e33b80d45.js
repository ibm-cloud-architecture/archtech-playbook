(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{XsUL:function(e,A,t){"use strict";t.r(A),t.d(A,"_frontmatter",(function(){return o})),t.d(A,"default",(function(){return p}));t("91GP"),t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("q1tI");var a=t("7ljp"),i=t("013z");t("qKvR");function n(){return(n=Object.assign||function(e){for(var A=1;A<arguments.length;A++){var t=arguments[A];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var o={},l={_frontmatter:o},c=i.a;function p(e){var A=e.components,t=function(e,A){if(null==e)return{};var t,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)t=n[a],A.indexOf(t)>=0||(i[t]=e[t]);return i}(e,["components"]);return Object(a.b)(c,n({},l,t,{components:A,mdxType:"MDXLayout"}),Object(a.b)("h1",null,"Introduction"),Object(a.b)("p",null,"This section covers how to deploy the application to RedHat OpenShift using an automated CI/CD pipeline. The diagram below shows the flow of the pipeline which starts when the developer checks their code in to Git and ends with the application being deployed in Production."),Object(a.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1031px"}},"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"53.125%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuzpJIs//EABYQAQEBAAAAAAAAAAAAAAAAAAEQAP/aAAgBAQABBQLFJ//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABsQAAIDAAMAAAAAAAAAAAAAAAABESExEEFh/9oACAEBAAE/IWn26MRJfo8E4//aAAwDAQACAAMAAAAQ2x//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAADAAMBAQAAAAAAAAAAAAAAARExQVFhcf/aAAgBAQABPxBxODjEMaRHrnC0/XBawhYRt/T/2Q==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Flow",title:"Flow",src:"/archtech-playbook/static/dfd18b4ccdc589fcc3a3fc25be060af3/73d2f/overview.jpg",srcSet:["/archtech-playbook/static/dfd18b4ccdc589fcc3a3fc25be060af3/69549/overview.jpg 288w","/archtech-playbook/static/dfd18b4ccdc589fcc3a3fc25be060af3/473e3/overview.jpg 576w","/archtech-playbook/static/dfd18b4ccdc589fcc3a3fc25be060af3/73d2f/overview.jpg 1031w"],sizes:"(max-width: 1031px) 100vw, 1031px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"the developer checks their code in to ",Object(a.b)("inlineCode",{parentName:"li"},"git")),Object(a.b)("li",{parentName:"ol"},"a ",Object(a.b)("inlineCode",{parentName:"li"},"webhook")," automatically triggers the Jenkins Pipeline in the RHOS cluster"),Object(a.b)("li",{parentName:"ol"},"the pipeline checks out the code from ",Object(a.b)("inlineCode",{parentName:"li"},"git")," and uses ",Object(a.b)("inlineCode",{parentName:"li"},"maven")," to build and test the application"),Object(a.b)("li",{parentName:"ol"},"the ",Object(a.b)("inlineCode",{parentName:"li"},"oc start build")," command is used to build a ",Object(a.b)("inlineCode",{parentName:"li"},"docker")," image for the application"),Object(a.b)("li",{parentName:"ol"},"the image is added to the ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")," and pushed to the ",Object(a.b)("inlineCode",{parentName:"li"},"docker registry")," in the RHOS cluster"),Object(a.b)("li",{parentName:"ol"},"the image is then ",Object(a.b)("inlineCode",{parentName:"li"},"tagged")," for the ",Object(a.b)("inlineCode",{parentName:"li"},"dev")," project"),Object(a.b)("li",{parentName:"ol"},"the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment")," running in the ",Object(a.b)("inlineCode",{parentName:"li"},"dev")," project is restarted using the newly created image"),Object(a.b)("li",{parentName:"ol"},"the image is then ",Object(a.b)("inlineCode",{parentName:"li"},"tagged")," for the ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," project"),Object(a.b)("li",{parentName:"ol"},"the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment")," running in the ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," project is restarted using the newly created image"),Object(a.b)("li",{parentName:"ol"},"the developer is prompted to ",Object(a.b)("inlineCode",{parentName:"li"},"approve")," the deployment to production"),Object(a.b)("li",{parentName:"ol"},"the image is then ",Object(a.b)("inlineCode",{parentName:"li"},"tagged")," for the ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," project"),Object(a.b)("li",{parentName:"ol"},"the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment")," running in the ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," project is restarted using the newly created image")),Object(a.b)("p",null,"The final versions of the files created in this section can be found in the ",Object(a.b)("inlineCode",{parentName:"p"},"was90")," branch of ",Object(a.b)("a",n({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/cloudpak-for-applications/tree/was90"}),"this repo")),Object(a.b)("h2",null,"Summary"),Object(a.b)("p",null,"This section has the following steps:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"RedHat OpenShift terminology and constructs"),Object(a.b)("li",{parentName:"ol"},"The ",Object(a.b)("inlineCode",{parentName:"li"},"Jenkinsfile")," for the pipeline"),Object(a.b)("li",{parentName:"ol"},"Create the ",Object(a.b)("inlineCode",{parentName:"li"},"Security Context Constraint")," required for WebSphere to run on RedHat OpenShift"),Object(a.b)("li",{parentName:"ol"},"Create the ",Object(a.b)("inlineCode",{parentName:"li"},"build"),", ",Object(a.b)("inlineCode",{parentName:"li"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," projects"),Object(a.b)("li",{parentName:"ol"},"Create a new ",Object(a.b)("inlineCode",{parentName:"li"},"Service Account")," and bind it to the ",Object(a.b)("inlineCode",{parentName:"li"},"Security Context Constraint")," in the ",Object(a.b)("inlineCode",{parentName:"li"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," projects"),Object(a.b)("li",{parentName:"ol"},"Deploy Jenkins in the ",Object(a.b)("inlineCode",{parentName:"li"},"build")," namespace"),Object(a.b)("li",{parentName:"ol"},"Grant the ",Object(a.b)("inlineCode",{parentName:"li"},"jenkins")," service account ",Object(a.b)("inlineCode",{parentName:"li"},"edit")," privileges in the ",Object(a.b)("inlineCode",{parentName:"li"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," projects"),Object(a.b)("li",{parentName:"ol"},"Import the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment template")," in to the ",Object(a.b)("inlineCode",{parentName:"li"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," projects"),Object(a.b)("li",{parentName:"ol"},"Create the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment config"),", ",Object(a.b)("inlineCode",{parentName:"li"},"service")," and ",Object(a.b)("inlineCode",{parentName:"li"},"route")," definitions using the template in the ",Object(a.b)("inlineCode",{parentName:"li"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," projects"),Object(a.b)("li",{parentName:"ol"},"Import the ",Object(a.b)("inlineCode",{parentName:"li"},"build template")," in to the ",Object(a.b)("inlineCode",{parentName:"li"},"build")," project"),Object(a.b)("li",{parentName:"ol"},"Create the ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")," and ",Object(a.b)("inlineCode",{parentName:"li"},"BuildConfig")," definitions in the ",Object(a.b)("inlineCode",{parentName:"li"},"build")," project"),Object(a.b)("li",{parentName:"ol"},"Trigger the pipeline and validate the application is running")),Object(a.b)("h2",null,"RedHat OpenShift constructs"),Object(a.b)("p",null,"It is assumed that the reader is familiar with the following basic constructs provided by Kubernetes:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/"}),"Pod")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/"}),"Deployment")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/"}),"ServiceAccount")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://kubernetes.io/docs/concepts/services-networking/service/"}),"Service"))),Object(a.b)("p",null,"RedHat OpenShift has the following constructs that are used in this scenario:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/architecture/networking/routes.html"}),"Route")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/managing_images.html"}),"ImageStream")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/builds/build_strategies.html"}),"BuildConfig")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/architecture/core_concepts/deployments.html#deployments-and-deployment-configurations"}),"DeploymentConfig")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/admin_guide/manage_scc.html#add-scc-to-user-group-project"}),"SecurityContextConstraints")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/application_lifecycle/new_app.html"}),"Application")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/templates.html"}),"Template"))),Object(a.b)("h2",null,"The Jenkinsfile for the pipeline"),Object(a.b)("p",null,"A ",Object(a.b)("a",n({parentName:"p"},{href:"https://jenkins.io/doc/book/pipeline/jenkinsfile/"}),Object(a.b)("inlineCode",{parentName:"a"},"Jenkinsfile"))," contains the definition of a pipeline in a format that can be stored in source control."),Object(a.b)("p",null,"In addition to standard Jenkins Pipeline Syntax, the OpenShift provides a Domain Specific Language (DSL) through the OpenShift Jenkins Client Plug-in. OpenShift DSL is easily readable that interacts with OpenShift API server, giving more control over the build, deployment, and promotion of applications on OpenShift cluster."),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"Jenkinsfile")," for this application can be found ",Object(a.b)("a",n({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/cloudpak-for-applications/blob/was90/Jenkinsfile"}),"here")),Object(a.b)("p",null,"The Jenkinsfile has the following ",Object(a.b)("inlineCode",{parentName:"p"},"stages"),":"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"preamble"),": outputs some variable valus to the console"),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"Maven Build"),": builds the application EAR file using ",Object(a.b)("inlineCode",{parentName:"li"},"maven")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"Unit Test"),": tests the application using ",Object(a.b)("inlineCode",{parentName:"li"},"maven")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"Build twas App Image"),": uses the ",Object(a.b)("inlineCode",{parentName:"li"},"BuildConfig")," to build the Docker Image using the provided ",Object(a.b)("inlineCode",{parentName:"li"},"Dockerfile"),". This automatically tags the image in the ",Object(a.b)("inlineCode",{parentName:"li"},"build")," Project’s ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"Promote to Dev"),": ",Object(a.b)("inlineCode",{parentName:"li"},"tags")," the image to the ",Object(a.b)("inlineCode",{parentName:"li"},"dev")," Project’s ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")," which results in the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment")," in the ",Object(a.b)("inlineCode",{parentName:"li"},"dev")," Project being restarted with the new image"),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"Promote to Stage"),": ",Object(a.b)("inlineCode",{parentName:"li"},"tags")," the image to the ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," Project’s ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")," which results in the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment")," in the ",Object(a.b)("inlineCode",{parentName:"li"},"stage")," Project being restarted with the new image  "),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"Promotion gate"),": prompts the user to approve promotion to production"),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"Promote to Prod"),": the image to the ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," Project’s ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")," which results in the ",Object(a.b)("inlineCode",{parentName:"li"},"deployment")," in the ",Object(a.b)("inlineCode",{parentName:"li"},"prod")," Project being restarted with the new image  ")),Object(a.b)("h2",null,"Create the Security Context Constraint"),Object(a.b)("p",null,"In order to deploy and run the WebSphere Base Docker image in an OpenShift cluster, we first need to configure certain security aspects for the cluster. The ",Object(a.b)("inlineCode",{parentName:"p"},"Security Context Constraint")," provided ",Object(a.b)("a",n({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/cloudpak-for-applications/blob/was90/Deployment/OpenShift/ssc.yaml"}),"here")," grants the ",Object(a.b)("a",n({parentName:"p"},{href:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/"}),"service account")," that the WebSphere Base Docker container is running under the required privileges to function correctly."),Object(a.b)("p",null,"A ",Object(a.b)("strong",{parentName:"p"},"cluster administrator")," can use the file provided ",Object(a.b)("a",n({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/cloudpak-for-applications/blob/was90/Deployment/OpenShift/ssc.yaml"}),"here")," with the following command to create the Security Context Constraint (SCC):"),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc apply -f ssc.yaml\n")),Object(a.b)("h2",null,"Create the projects"),Object(a.b)("p",null,"Four RedHat OpenShift projects are required in this scenario:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Build: this project will contain the Jenkins server and the artifacts used to build the application image  "),Object(a.b)("li",{parentName:"ul"},"Dev: this is the ",Object(a.b)("inlineCode",{parentName:"li"},"development")," environment for this application"),Object(a.b)("li",{parentName:"ul"},"Stage: this is the ",Object(a.b)("inlineCode",{parentName:"li"},"staging")," environment for this application"),Object(a.b)("li",{parentName:"ul"},"Prod: this is the ",Object(a.b)("inlineCode",{parentName:"li"},"production")," environment for this application")),Object(a.b)("p",null,"The file provided ",Object(a.b)("a",n({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/cloudpak-for-applications/blob/was90/Deployment/OpenShift/twas-projects.yaml"}),"here")," contains the definitions for the four projects in a single file to make creation easier"),Object(a.b)("p",null,"Issue the command shown below to create the projects"),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc create -f twas-projects.yaml\n")),Object(a.b)("h2",null,"Create a service account"),Object(a.b)("p",null,"It is a good Kubernetes practice to create a ",Object(a.b)("a",n({parentName:"p"},{href:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/"}),"service account")," for your applications. A service account provides an identity for processes that run in a Pod. In this step we will create a new service account with the name ",Object(a.b)("inlineCode",{parentName:"p"},"websphere")," in each of the ",Object(a.b)("inlineCode",{parentName:"p"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")," projects and add the Security Context Constraint created above to them."),Object(a.b)("p",null,"Issue the commands shown below to create the ",Object(a.b)("inlineCode",{parentName:"p"},"websphere")," service account and bind the ibm-websphere-scc to it in each of the projects:"),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc create serviceaccount websphere -n cos-twas-dev\noc create serviceaccount websphere -n cos-twas-stage\noc create serviceaccount websphere -n cos-twas-prod\noc adm policy add-scc-to-user ibm-websphere-scc -z websphere -n cos-twas-dev\noc adm policy add-scc-to-user ibm-websphere-scc -z websphere -n cos-twas-stage\noc adm policy add-scc-to-user ibm-websphere-scc -z websphere -n cos-twas-prod\n")),Object(a.b)("h2",null,"Deploy Jenkins"),Object(a.b)("p",null,"Some RedHat OpenShift clusters are configured to automatically provision a Jenkins instance in a build project. The steps below can be used if your cluster is not configured for automatic Jenkins provisioning:"),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc project cos-twas-build\noc new-app jenkins-persistent\n")),Object(a.b)("h2",null,"Update the Jenkins service account"),Object(a.b)("p",null,"During provisioning of the Jenkins master a service account with the name ",Object(a.b)("inlineCode",{parentName:"p"},"jenkins")," is created. This service account has privileges to create new artifacts only in the project that it is running in. In this scenario Jenkins will need to create artifacts in the ",Object(a.b)("inlineCode",{parentName:"p"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")," projects."),Object(a.b)("p",null,"Issue the commands below to allow the ",Object(a.b)("inlineCode",{parentName:"p"},"jenkins")," service account to ",Object(a.b)("inlineCode",{parentName:"p"},"edit")," artifacts in the ",Object(a.b)("inlineCode",{parentName:"p"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")," projects."),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc policy add-role-to-user edit system:serviceaccount:cos-twas-build:jenkins -n cos-twas-dev\noc policy add-role-to-user edit system:serviceaccount:cos-twas-build:jenkins -n cos-twas-stage\noc policy add-role-to-user edit system:serviceaccount:cos-twas-build:jenkins -n cos-twas-prod\n")),Object(a.b)("h2",null,"Import the deployment templates"),Object(a.b)("p",null,"RedHat OpenShift ",Object(a.b)("a",n({parentName:"p"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/templates.html"}),"templates")," are used to make artifact creation easier and repeatable. The template definition provided ",Object(a.b)("a",n({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/cloudpak-for-applications/blob/was90/Deployment/OpenShift/template-twas-deploy.yaml"}),"here")," defines a Kubernetes ",Object(a.b)("a",n({parentName:"p"},{href:"https://kubernetes.io/docs/concepts/services-networking/service/"}),Object(a.b)("inlineCode",{parentName:"a"},"Service")),", ",Object(a.b)("a",n({parentName:"p"},{href:"https://docs.openshift.com/container-platform/3.11/architecture/networking/routes.html"}),Object(a.b)("inlineCode",{parentName:"a"},"Route"))," and ",Object(a.b)("a",n({parentName:"p"},{href:"https://docs.openshift.com/container-platform/3.11/architecture/core_concepts/deployments.html#deployments-and-deployment-configurations"}),Object(a.b)("inlineCode",{parentName:"a"},"DeploymentConfig"))," for the CustomerOrderServices application."),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"gse-twas-deploy")," template defines the following:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"service")," listening on ports ",Object(a.b)("inlineCode",{parentName:"li"},"9080"),", ",Object(a.b)("inlineCode",{parentName:"li"},"9443")," and ",Object(a.b)("inlineCode",{parentName:"li"},"9082")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"route")," to expose the ",Object(a.b)("inlineCode",{parentName:"li"},"9443")," port externally"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"DeploymentConfig")," to host the WebSphere Base container.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"The ",Object(a.b)("inlineCode",{parentName:"li"},"image")," for the container is taken from the ",Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/managing_images.html"}),Object(a.b)("inlineCode",{parentName:"a"},"ImageStream"))," that will be populated by the Jenkins pipeline."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"environment variables")," are defined for the DB2 database used by the application allowing for environment specific information to be injected"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",n({parentName:"li"},{href:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/"}),"Probes")," for ",Object(a.b)("inlineCode",{parentName:"li"},"liveness")," and ",Object(a.b)("inlineCode",{parentName:"li"},"readiness")," are defined to check port 9443 is active"),Object(a.b)("li",{parentName:"ul"},"The ",Object(a.b)("inlineCode",{parentName:"li"},"securityContext")," is set to allow read/write access to the filesystem and to run the container as ",Object(a.b)("inlineCode",{parentName:"li"},"user 1001")),Object(a.b)("li",{parentName:"ul"},"The deployment will be updated if a new image is loaded to the ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")," or if a change to the configuration is detected.")))),Object(a.b)("p",null,"Issue the commands below to load the template named ",Object(a.b)("inlineCode",{parentName:"p"},"gse-twas-deploy")," in the ",Object(a.b)("inlineCode",{parentName:"p"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")," projects."),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc create -f template-twas-deploy.yaml -n cos-twas-dev\noc create -f template-twas-deploy.yaml -n cos-twas-stage\noc create -f template-twas-deploy.yaml -n cos-twas-prod\n")),Object(a.b)("h2",null,"Create the deployment definitions"),Object(a.b)("p",null,"In this step the ",Object(a.b)("inlineCode",{parentName:"p"},"gse-twas-deploy")," template will be used to create a RedHat OpenShift ",Object(a.b)("a",n({parentName:"p"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/application_lifecycle/new_app.html"}),"application")," named ",Object(a.b)("inlineCode",{parentName:"p"},"cos-twas")," in the ",Object(a.b)("inlineCode",{parentName:"p"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")," namespaces."),Object(a.b)("p",null,"The result will be:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"service")," listening on ports ",Object(a.b)("inlineCode",{parentName:"li"},"9080"),", ",Object(a.b)("inlineCode",{parentName:"li"},"9443")," and ",Object(a.b)("inlineCode",{parentName:"li"},"9082")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"route")," to expose the ",Object(a.b)("inlineCode",{parentName:"li"},"9443")," port externally"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"DeploymentConfig")," to host the WebSphere Base container. The deployment config will wait for a ",Object(a.b)("inlineCode",{parentName:"li"},"docker image")," to be loaded in to the ",Object(a.b)("inlineCode",{parentName:"li"},"ImageStream")," by the Jenkins pipeline.")),Object(a.b)("p",null,"Issue the following commands to create the applications from the template:"),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc new-app gse-twas-deploy -p APPLICATION_NAME=cos-twas -n cos-twas-dev\noc new-app gse-twas-deploy -p APPLICATION_NAME=cos-twas -n cos-twas-stage\noc new-app gse-twas-deploy -p APPLICATION_NAME=cos-twas -n cos-twas-prod\n")),Object(a.b)("h2",null,"Import the build templates"),Object(a.b)("p",null,"In this step a template for the ",Object(a.b)("inlineCode",{parentName:"p"},"build")," process will be loaded in to the ",Object(a.b)("inlineCode",{parentName:"p"},"build")," project. The template provided ",Object(a.b)("a",n({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/cloudpak-for-applications/blob/was90/Deployment/OpenShift/template-twas-build.yaml"}),"here")," defines the following artifacts:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"An ",Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/managing_images.html"}),"ImageStream")," for the application image. This will be populated by the Jenkins Pipeline"),Object(a.b)("li",{parentName:"ul"},"An ImageStream for WebSphere Base which will pull down the latest version of the ",Object(a.b)("inlineCode",{parentName:"li"},"ibmcom/websphere-traditional:latest-ubi")," image and will monitor DockerHub for any updates."),Object(a.b)("li",{parentName:"ul"},"A ",Object(a.b)("inlineCode",{parentName:"li"},"binary")," ",Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/builds/build_strategies.html"}),"BuildConfig")," that will be used by the Jenkins Pipeline to build the application Docker image"),Object(a.b)("li",{parentName:"ul"},"A ",Object(a.b)("inlineCode",{parentName:"li"},"jenkinsfile")," BuildConfig that defines the ",Object(a.b)("inlineCode",{parentName:"li"},"Pipeline")," using the ",Object(a.b)("inlineCode",{parentName:"li"},"Jenkinsfile")," in GitHub"),Object(a.b)("li",{parentName:"ul"},"Parameters to allow the WebSphere Base image and GitHub repository to be provided when the template is instantiated")),Object(a.b)("p",null,"Issue the commands below to load the template named ",Object(a.b)("inlineCode",{parentName:"p"},"gse-twas-build")," in the ",Object(a.b)("inlineCode",{parentName:"p"},"build")," projects."),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),"oc create -f template-twas-build.yaml -n cos-twas-build\n")),Object(a.b)("h2",null,"Create the build definitions"),Object(a.b)("p",null,"In this step the ",Object(a.b)("inlineCode",{parentName:"p"},"gse-twas-build")," template will be used to create a RedHat OpenShift ",Object(a.b)("a",n({parentName:"p"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/application_lifecycle/new_app.html"}),"application")," named ",Object(a.b)("inlineCode",{parentName:"p"},"cos-twas")," in the ",Object(a.b)("inlineCode",{parentName:"p"},"build")," namespaces."),Object(a.b)("p",null,"The result will be:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"An ",Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/managing_images.html"}),"ImageStream")," for the application image. This will be populated by the Jenkins Pipeline"),Object(a.b)("li",{parentName:"ul"},"An ImageStream for WebSphere Base which will pull down the latest version of the ",Object(a.b)("inlineCode",{parentName:"li"},"ibmcom/websphere-traditional:latest-ubi")," image and will monitor DockerHub for any updates."),Object(a.b)("li",{parentName:"ul"},"A ",Object(a.b)("inlineCode",{parentName:"li"},"binary")," ",Object(a.b)("a",n({parentName:"li"},{href:"https://docs.openshift.com/container-platform/3.11/dev_guide/builds/build_strategies.html"}),"BuildConfig")," that will be used by the Jenkins Pipeline to build the application Docker image"),Object(a.b)("li",{parentName:"ul"},"A ",Object(a.b)("inlineCode",{parentName:"li"},"jenkinsfile")," BuildConfig that defines the ",Object(a.b)("inlineCode",{parentName:"li"},"Pipeline")," using the ",Object(a.b)("inlineCode",{parentName:"li"},"Jenkinsfile")," in GitHub (with the URL provided as a parameter when the application is created)")),Object(a.b)("p",null,"Issue the following commands to create the application from the template:"),Object(a.b)("pre",null,Object(a.b)("code",n({parentName:"pre"},{}),'oc new-app gse-twas-build -p APPLICATION_NAME=cos-twas -p SOURCE_URL="https://github.com/ibm-cloud-architecture/cloudpak-for-applications" -n cos-twas-build\n')),Object(a.b)("h2",null,"Run the pipeline"),Object(a.b)("p",null,"The newly created pipeline can be started from the RedHat OpenShift console which allows access to the Jenkins logs but also tracks the progress in the OCP console."),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Navigate to ",Object(a.b)("strong",{parentName:"p"},"Application Console —> Customer Order Services on twas - Build —> Builds —> Pipelines")," and click the ",Object(a.b)("strong",{parentName:"p"},"Start Pipeline")," button"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"891px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"24.305555555555557%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAZpCQL//xAAXEAEBAQEAAAAAAAAAAAAAAAADABQE/9oACAEBAAEFAuQTSyBZBv/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhEzEv/aAAgBAQAGPwKXcbM0Zo//xAAXEAADAQAAAAAAAAAAAAAAAAAAARHx/9oACAEBAAE/IVkkyG4x6h//2gAMAwEAAgADAAAAEP8A3//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ECf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBn/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIVFhsdHw/9oACAEBAAE/ELgaDMKjiDxHMbpOz2n/2Q==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Run Pipeline",title:"Run Pipeline",src:"/archtech-playbook/static/7cd9fcd2747077fe548fe56b7fb98841/e4ff5/run-pipeline.jpg",srcSet:["/archtech-playbook/static/7cd9fcd2747077fe548fe56b7fb98841/69549/run-pipeline.jpg 288w","/archtech-playbook/static/7cd9fcd2747077fe548fe56b7fb98841/473e3/run-pipeline.jpg 576w","/archtech-playbook/static/7cd9fcd2747077fe548fe56b7fb98841/e4ff5/run-pipeline.jpg 891w"],sizes:"(max-width: 891px) 100vw, 891px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"When the pipeline starts, click the ",Object(a.b)("inlineCode",{parentName:"p"},"view log")," link to go to the Jenkins administration console. Note that it may take a couple of minutes before the ",Object(a.b)("inlineCode",{parentName:"p"},"view log")," link appears on the first pipeline build"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"707px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"20.48611111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3aAD/8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAQUCL//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABYQAAMAAAAAAAAAAAAAAAAAAAAQEf/aAAgBAQABPyFIf//aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEAAgMAAAAAAAAAAAAAAAABACEQMUH/2gAIAQEAAT8Qsa64QthP/9k=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"View Log",title:"View Log",src:"/archtech-playbook/static/70c2ef1e75f6313a5badcd152dcfccc9/cd9ca/view-log.jpg",srcSet:["/archtech-playbook/static/70c2ef1e75f6313a5badcd152dcfccc9/69549/view-log.jpg 288w","/archtech-playbook/static/70c2ef1e75f6313a5badcd152dcfccc9/473e3/view-log.jpg 576w","/archtech-playbook/static/70c2ef1e75f6313a5badcd152dcfccc9/cd9ca/view-log.jpg 707w"],sizes:"(max-width: 707px) 100vw, 707px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"When prompted, log in with your OpenShift account and grant the required access permissions. The Jenkins console log will be displayed as shown below:"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"934px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"60.06944444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3pSg//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAWEAEBAQAAAAAAAAAAAAAAAAABEAD/2gAIAQEAAT8hxAv/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAEDBQAAAAAAAAAAAAAAAQAQESFBUYGRof/aAAgBAQABPxAzp5AGxxOoDmWKf//Z')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Jenkins Log",title:"Jenkins Log",src:"/archtech-playbook/static/fd52b1a4a1c755e53e87e3537b1121e8/4318b/jenkins-log.jpg",srcSet:["/archtech-playbook/static/fd52b1a4a1c755e53e87e3537b1121e8/69549/jenkins-log.jpg 288w","/archtech-playbook/static/fd52b1a4a1c755e53e87e3537b1121e8/473e3/jenkins-log.jpg 576w","/archtech-playbook/static/fd52b1a4a1c755e53e87e3537b1121e8/4318b/jenkins-log.jpg 934w"],sizes:"(max-width: 934px) 100vw, 934px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Return to the OpenShift Console and track the progress of the pipeline"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"504px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"60.416666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAQAF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd1lCZf/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAAAEQExEEGh/9oACAEBAAE/Ia30agRNZ//aAAwDAQACAAMAAAAQpM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAhEDFxgcH/2gAIAQEAAT8QIQm3KRm12YAN+zcqgAS3j//Z')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Running",title:"Running",src:"/archtech-playbook/static/c9e5e0252de048fc45f72bec7d44892e/f797a/pipeline-running.jpg",srcSet:["/archtech-playbook/static/c9e5e0252de048fc45f72bec7d44892e/69549/pipeline-running.jpg 288w","/archtech-playbook/static/c9e5e0252de048fc45f72bec7d44892e/f797a/pipeline-running.jpg 504w"],sizes:"(max-width: 504px) 100vw, 504px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"The pipeline will eventually stop at the ",Object(a.b)("strong",{parentName:"p"},"Promotion Gate")," for approval to deploy to Production. Click the ",Object(a.b)("strong",{parentName:"p"},"Input Required")," link as shown below"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"500px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"59.72222222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHeTmLJD//EABcQAQEBAQAAAAAAAAAAAAAAAAABEEH/2gAIAQEAAQUCrmVH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBABAAMBAAAAAAAAAAAAAAAAAAEhMfD/2gAIAQEAAT8hw5aEsMP/2gAMAwEAAgADAAAAEHjv/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QR//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EGf/xAAcEAACAgIDAAAAAAAAAAAAAAAAARExIUFR4fD/2gAIAQEAAT8QZS1HLgcbY8sp2Zq4HatoZsf/2Q==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Gate",title:"Gate",src:"/archtech-playbook/static/d45ee59f8d1050994a4f31becd8b1b08/bb312/gate.jpg",srcSet:["/archtech-playbook/static/d45ee59f8d1050994a4f31becd8b1b08/69549/gate.jpg 288w","/archtech-playbook/static/d45ee59f8d1050994a4f31becd8b1b08/bb312/gate.jpg 500w"],sizes:"(max-width: 500px) 100vw, 500px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"When the ",Object(a.b)("em",{parentName:"p"},"Promote application to Production")," question is displayed, click ",Object(a.b)("strong",{parentName:"p"},"Proceed")),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"459px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"21.875%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAG5oDMgr//EABgQAAIDAAAAAAAAAAAAAAAAAAARAQID/9oACAEBAAEFAp0s0I//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BZ//EABUQAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAY/Am//xAAZEAEAAgMAAAAAAAAAAAAAAAABABEx4fD/2gAIAQEAAT8hIV4YGtyvM//aAAwDAQACAAMAAAAQd8//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxBT/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxAf/8QAGhABAAIDAQAAAAAAAAAAAAAAAQAhETFhkf/aAAgBAQABPxAhAECuzB031ATT6n//2Q==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Promote",title:"Promote",src:"/archtech-playbook/static/20a3069290ddb7ed96418577f3053b47/cddd2/promote.jpg",srcSet:["/archtech-playbook/static/20a3069290ddb7ed96418577f3053b47/69549/promote.jpg 288w","/archtech-playbook/static/20a3069290ddb7ed96418577f3053b47/cddd2/promote.jpg 459w"],sizes:"(max-width: 459px) 100vw, 459px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Return to the OpenShift Console and validate that the pipeline is now complete"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"516px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"85.7638888888889%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2iFLKAH//EABUQAQEAAAAAAAAAAAAAAAAAACBB/9oACAEBAAEFAhB//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAGhABAAMAAwAAAAAAAAAAAAAAAQAQESEx8P/aAAgBAQABPyFMJuEwY9Tzmm//2gAMAwEAAgADAAAAEIQIPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAAIDAQEBAAAAAAAAAAAAAAERACExkRBh/9oACAEBAAE/EAMd/TNLHamwomVKz1SzRmA1cxBnn//Z')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Complete",title:"Complete",src:"/archtech-playbook/static/07d6cf80864d70e0925c2088623d3acd/c8085/complete.jpg",srcSet:["/archtech-playbook/static/07d6cf80864d70e0925c2088623d3acd/69549/complete.jpg 288w","/archtech-playbook/static/07d6cf80864d70e0925c2088623d3acd/c8085/complete.jpg 516w"],sizes:"(max-width: 516px) 100vw, 516px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(a.b)("h2",null,"Validate the Deployments"),Object(a.b)("p",null,"Now that the pipeline is complete, validate the Customer Order Services application is deployed and running in ",Object(a.b)("inlineCode",{parentName:"p"},"dev"),", ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"In the OpenShift Console, navigate to ",Object(a.b)("strong",{parentName:"p"},"Application Console —> Customer Order Services on twas - Dev —> Applications —> Deployments")," and click on the link in the ",Object(a.b)("strong",{parentName:"p"},"Latest Version")," column"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"746px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"24.305555555555557%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAbNMJB//xAAZEAEAAgMAAAAAAAAAAAAAAAACABMBAwT/2gAIAQEAAQUC4SVivXKxP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAACATKREf/aAAgBAQAGPwJ+rElFwouH/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAERITHB8f/aAAgBAQABPyGhoaypFBrHHn//2gAMAwEAAgADAAAAEPPP/8QAFREBAQAAAAAAAAAAAAAAAAAAEEH/2gAIAQMBAT8Qh//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EGf/xAAaEAACAwEBAAAAAAAAAAAAAAABEQBBUfAh/9oACAEBAAE/ED0oQUnh2EPU+hAerjJ//9k=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Deployment",title:"Deployment",src:"/archtech-playbook/static/3e7b5ddd678d765912f3e26f62c8d0bd/bc8ed/deployment.jpg",srcSet:["/archtech-playbook/static/3e7b5ddd678d765912f3e26f62c8d0bd/69549/deployment.jpg 288w","/archtech-playbook/static/3e7b5ddd678d765912f3e26f62c8d0bd/473e3/deployment.jpg 576w","/archtech-playbook/static/3e7b5ddd678d765912f3e26f62c8d0bd/bc8ed/deployment.jpg 746w"],sizes:"(max-width: 746px) 100vw, 746px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Information about the deployment will be displayed including the ",Object(a.b)("strong",{parentName:"p"},"image")," that is being used (note the ",Object(a.b)("strong",{parentName:"p"},"tag")," on the image as it will be the same in the ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")," deployments). After a few minutes the container will be marked as ",Object(a.b)("strong",{parentName:"p"},"ready")),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"585px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"98.61111111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuWbQFyCg//8QAFhAAAwAAAAAAAAAAAAAAAAAAECAh/9oACAEBAAEFAjW//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFhAAAwAAAAAAAAAAAAAAAAAAECAx/9oACAEBAAY/AjG//8QAHRAAAgEFAQEAAAAAAAAAAAAAAAERECExUYFBYf/aAAgBAQABPyH7LR0gnQ+mcqmy8q/lP//aAAwDAQACAAMAAAAQxMgA/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QSE//xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAgEBPxBj/8QAGxABAQEBAQADAAAAAAAAAAAAAREAITEQQXH/2gAIAQEAAT8QqVAs6ZUBtveBv073JKzDg4J8F+3mqCipwtevHf/Z')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Pods",title:"Pods",src:"/archtech-playbook/static/c23a9041c89b23bda9d1cb1b7b1f16b8/357e8/pods.jpg",srcSet:["/archtech-playbook/static/c23a9041c89b23bda9d1cb1b7b1f16b8/69549/pods.jpg 288w","/archtech-playbook/static/c23a9041c89b23bda9d1cb1b7b1f16b8/473e3/pods.jpg 576w","/archtech-playbook/static/c23a9041c89b23bda9d1cb1b7b1f16b8/357e8/pods.jpg 585w"],sizes:"(max-width: 585px) 100vw, 585px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Click ",Object(a.b)("strong",{parentName:"p"},"Applications —> Routes")," and click on the ",Object(a.b)("strong",{parentName:"p"},"route")," for the application. Note that the URL is < application_name >-< project_name >.< ocp cluster url >. In this case the project name is ",Object(a.b)("inlineCode",{parentName:"p"},"cos-twas-dev")),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"778px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3aAH/8QAFRABAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQEAAQUCj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABYQAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAQABPyFuBUh//9oADAMBAAIAAwAAABCAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQADAQAAAAAAAAAAAAAAAAEAESEx/9oACAEBAAE/EGsK7Ei8mlcn/9k=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Route",title:"Route",src:"/archtech-playbook/static/629892b302700bb69343dcf744341633/faad2/route.jpg",srcSet:["/archtech-playbook/static/629892b302700bb69343dcf744341633/69549/route.jpg 288w","/archtech-playbook/static/629892b302700bb69343dcf744341633/473e3/route.jpg 576w","/archtech-playbook/static/629892b302700bb69343dcf744341633/faad2/route.jpg 778w"],sizes:"(max-width: 778px) 100vw, 778px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Add ",Object(a.b)("inlineCode",{parentName:"p"},"/CustomerOrderServicesWeb")," to the end of the URL in the browser to access the application"),Object(a.b)("span",n({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(a.b)("span",n({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"27.77777777777778%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdGgCz//xAAYEAADAQEAAAAAAAAAAAAAAAAAAQMEFP/aAAgBAQABBQLlkLNJDjFH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAQUBAAAAAAAAAAAAAAAAAAExMjORof/aAAgBAQAGPwJukdK0P//EABkQAAMAAwAAAAAAAAAAAAAAAAABQRGRwf/aAAgBAQABPyHPYj3sMOJ//9oADAMBAAIAAwAAABDz7//EABURAQEAAAAAAAAAAAAAAAAAAAAB/9oACAEDAQE/EFr/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QgMv/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMWH/2gAIAQEAAT8Q7UrxMOLbJpiAb8uH/9k=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",n({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Dev Running",title:"Dev Running",src:"/archtech-playbook/static/e75437b00f256e1a8b05cd66dec92655/2e753/dev-running.jpg",srcSet:["/archtech-playbook/static/e75437b00f256e1a8b05cd66dec92655/69549/dev-running.jpg 288w","/archtech-playbook/static/e75437b00f256e1a8b05cd66dec92655/473e3/dev-running.jpg 576w","/archtech-playbook/static/e75437b00f256e1a8b05cd66dec92655/2e753/dev-running.jpg 1152w","/archtech-playbook/static/e75437b00f256e1a8b05cd66dec92655/bfe18/dev-running.jpg 1186w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Repeat the validations for the ",Object(a.b)("inlineCode",{parentName:"p"},"stage")," and ",Object(a.b)("inlineCode",{parentName:"p"},"prod")," Projects."))),Object(a.b)("h2",null,"Review and Next Steps"),Object(a.b)("p",null,"In this section you configured a CI/CD pipeline for the CustomerOrderServices application that builds a single immutable image for the latest version of the application and then deploys it to three different environments."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-applications-was-90-t-was-deploy-mdx-66172d3b827e33b80d45.js.map